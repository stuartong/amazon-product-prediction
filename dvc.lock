schema: '2.0'
stages:
  load_data:
    cmd: python load_data.py
    deps:
    - path: load_data.py
      md5: 1082ba52b665af6435f4948994c2af2d
      size: 4012
    outs:
    - path: data/prepared
      md5: 7870636af441f6a2358ac2b71ac57a47.dir
      size: 834301147
      nfiles: 2
  preprocess_products:
    cmd: python preprocess_products.py data/prepared
    deps:
    - path: data/prepared
      md5: 7870636af441f6a2358ac2b71ac57a47.dir
      size: 834301147
      nfiles: 2
    - path: preprocess_products.py
      md5: 45409078008787187b9e31603ce1c5fc
      size: 3340
    params:
      params.yaml:
        preprocess_products:
          word2vec_features: true
          handpicked_features: true
          word2vec_model_name: glove-wiki-gigaword-300
          pca: false
          tfidf: true
          occurrence_threshold: 500
    outs:
    - path: data/products
      md5: 84a3a1917ba5f95f1fc6980e2acd536e.dir
      size: 714734328
      nfiles: 1
  preprocess_reviews:
    cmd: python preprocess_reviews.py data/prepared
    deps:
    - path: data/prepared
      md5: 7870636af441f6a2358ac2b71ac57a47.dir
      size: 834301147
      nfiles: 2
    - path: preprocess_reviews.py
      md5: 0c778d4227afa4c18417bc332a2507cd
      size: 1849
    outs:
    - path: data/reviews
      md5: e0866fe512426dbf79e2bd5ee359096b.dir
      size: 158450968
      nfiles: 1
  success_metrics:
    cmd: python create_success_metrics.py data/products data/reviews
    deps:
    - path: create_success_metrics.py
      md5: 52fad55e66a58f46424dbc465aca45d9
      size: 1920
    - path: data/products
      md5: 84a3a1917ba5f95f1fc6980e2acd536e.dir
      size: 714734328
      nfiles: 1
    - path: data/reviews
      md5: e0866fe512426dbf79e2bd5ee359096b.dir
      size: 158450968
      nfiles: 1
    params:
      params.yaml:
        success_metrics.cutoff: 2
    outs:
    - path: data/metrics
      md5: 8c904c12d1aa98a09b4ab17fca0944ec.dir
      size: 717486287
      nfiles: 1
  supervised_model:
    cmd: python model_supervised.py data/metrics
    deps:
    - path: data/metrics
      md5: 8c904c12d1aa98a09b4ab17fca0944ec.dir
      size: 717486287
      nfiles: 1
    - path: model_supervised.py
      md5: b3430d7821babdb25a8fcc710ad475ac
      size: 7572
    params:
      params.yaml:
        supervised_model.gscv: false
        supervised_model.model_type: SVC
        supervised_model.n_jobs: 1
        supervised_model.oversample: false
        supervised_model.param_dict:
          C:
          - 0.1
          - 1
          - 10
          - 100
          gamma:
          - 1
          - 0.1
          - 0.01
          - 0.001
          kernel:
          - rbf
          - poly
          - sigmoid
          random_state:
          - 42
        supervised_model.params:
          random_state: 42
          C: 100
          gamma: 1
          kernel: rbf
        supervised_model.return_train_score: false
        supervised_model.scale: true
        supervised_model.split: 0.8
    outs:
    - path: model/X_test.npy
      md5: ed763f4a2e14d743a54fa6cb66a82489
      size: 604928
    - path: model/X_train.npy
      md5: 1b82225ba8db8c307c9db7f03035a78b
      size: 4838328
    - path: model/X_val.npy
      md5: 962c8982221df18db13d13b394ed13b1
      size: 604928
    - path: model/model.pkl
      md5: 3b85ef9eb619ee97eff24a914fc9a57c
      size: 4297508
    - path: model/y_test.npy
      md5: 1904ae6bb31dc9abd611dae8adb6e5ac
      size: 12224
    - path: model/y_train.npy
      md5: 93f4e0ee3fec57f9d0938f0d1a3b798a
      size: 96892
    - path: model/y_val.npy
      md5: e30acb8ce8b20af1197c760f6aed8ee6
      size: 12224
  evaluate_supervised:
    cmd: python evaluate_supervised.py prdct_supervised_report.json
    deps:
    - path: evaluate_supervised.py
      md5: c6bb6c672894feec62ee04bdaa09b767
      size: 6972
    - path: model/
      md5: fa1a41a0c2982ecb880a8b576ca3f081.dir
      size: 10467122
      nfiles: 8
    outs:
    - path: prdct_supervised_report.json
      md5: 3715c25824a895cb021cf219dc2d6708
      size: 3281
