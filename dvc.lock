schema: '2.0'
stages:
  load_data:
    cmd: python load_data.py http://deepyeti.ucsd.edu/jianmo/amazon/metaFiles2/meta_Appliances.json.gz
      http://deepyeti.ucsd.edu/jianmo/amazon/categoryFiles/Appliances.json.gz
    deps:
    - path: http://deepyeti.ucsd.edu/jianmo/amazon/categoryFiles/Appliances.json.gz
      checksum: '"5d9e86fd-42730f5"'
      size: 69677301
    - path: http://deepyeti.ucsd.edu/jianmo/amazon/metaFiles2/meta_Appliances.json.gz
      checksum: '"60a1a28f-391c4f4"'
      size: 59884788
    - path: load_data.py
      md5: 0fc79111c8aa338b0a716a0e1f3407b2
      size: 4159
    outs:
    - path: data/prepared
      md5: 7870636af441f6a2358ac2b71ac57a47.dir
      size: 834301147
      nfiles: 2
  preprocess_products:
    cmd: python preprocess_products.py data/prepared
    deps:
    - path: data/prepared
      md5: 7870636af441f6a2358ac2b71ac57a47.dir
      size: 834301147
      nfiles: 2
    - path: preprocess_products.py
      md5: 161880bfa4949ab6ea8d191bd1061f87
      size: 4637
    params:
      params.yaml:
        preprocess_products:
          word2vec_features: true
          handpicked_features: true
          word2vec_model_name: glove-wiki-gigaword-300
          pca: true
    outs:
    - path: data/products
      md5: b71a3ad7ee108adb66bb784ccc7776cc.dir
      size: 671265475
      nfiles: 1
  preprocess_reviews:
    cmd: python preprocess_reviews.py data/prepared
    deps:
    - path: data/prepared
      md5: 7870636af441f6a2358ac2b71ac57a47.dir
      size: 834301147
      nfiles: 2
    - path: preprocess_reviews.py
      md5: 0c778d4227afa4c18417bc332a2507cd
      size: 1849
    outs:
    - path: data/reviews
      md5: e0866fe512426dbf79e2bd5ee359096b.dir
      size: 158450968
      nfiles: 1
  success_metrics:
    cmd: python create_success_metrics.py data/products data/reviews
    deps:
    - path: create_success_metrics.py
      md5: 52fad55e66a58f46424dbc465aca45d9
      size: 1920
    - path: data/products
      md5: b71a3ad7ee108adb66bb784ccc7776cc.dir
      size: 671265475
      nfiles: 1
    - path: data/reviews
      md5: e0866fe512426dbf79e2bd5ee359096b.dir
      size: 158450968
      nfiles: 1
    params:
      params.yaml:
        success_metrics.cutoff: 10
    outs:
    - path: data/metrics
      md5: b9af4c8371d3d4b2e3a8d685a694a0ba.dir
      size: 674017434
      nfiles: 1
  supervised_model:
    cmd: python model_supervised.py data/metrics
    deps:
    - path: data/metrics
      md5: b9af4c8371d3d4b2e3a8d685a694a0ba.dir
      size: 674017434
      nfiles: 1
    - path: model_supervised.py
      md5: 2c7894ee14b4ea6c4b20968d3223e3df
      size: 6866
    params:
      params.yaml:
        supervised_model.gscv: false
        supervised_model.model_type: LogisticRegression
        supervised_model.n_jobs: 1
        supervised_model.oversample: false
        supervised_model.param_dict: None
        supervised_model.params:
          random_state: 42
          max_iter: 5000
          solver: saga
          class_weight: balanced
        supervised_model.return_train_score: false
        supervised_model.scale: true
        supervised_model.split: 0.6
    outs:
    - path: model/X_test.npy
      md5: 56ea139a2f84a46375537ed07ea7db83
      size: 48512
    - path: model/X_train.npy
      md5: 608f007926a5a126d46eaab467c92738
      size: 145272
    - path: model/X_val.npy
      md5: 60a3d4b91a2206e0eefc04ddc4d4d1d1
      size: 48512
    - path: model/model.sav
      md5: a7b9e760c27bb565ebc488cd6e175f98
      size: 686
    - path: model/y_test.npy
      md5: 4e12d5f754ba8f3be58df75bcce1c1ed
      size: 24320
    - path: model/y_train.npy
      md5: 1f678d00b23d3e315101469c75024db7
      size: 72700
    - path: model/y_val.npy
      md5: b66703284a13923a256b51144eb77586
      size: 24320
