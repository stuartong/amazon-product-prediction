schema: '2.0'
stages:
  load_data:
    cmd: python load_data.py
    deps:
    - path: load_data.py
      md5: 1d8771affb5f14d8f66712367fe680b2
      size: 3430
    outs:
    - path: data/prepared
      md5: 7870636af441f6a2358ac2b71ac57a47.dir
      size: 834301147
      nfiles: 2
  preprocess_products:
    cmd: python preprocess_products.py data/prepared
    deps:
    - path: data/prepared
      md5: 7870636af441f6a2358ac2b71ac57a47.dir
      size: 834301147
      nfiles: 2
    - path: preprocess_products.py
      md5: 744e6ac2b944ea41bec7931390324f43
      size: 2737
    params:
      params.yaml:
        preprocess_products:
          word2vec_features: true
          handpicked_features: true
          word2vec_model_name: glove-wiki-gigaword-300
          occurrence_threshold: 500
    outs:
    - path: data/products
      md5: 1b578030d5f2be4ff6ce39a5676d88f5.dir
      size: 876608673
      nfiles: 1
  preprocess_reviews:
    cmd: python preprocess_reviews.py data/prepared
    deps:
    - path: data/prepared
      md5: 7870636af441f6a2358ac2b71ac57a47.dir
      size: 834301147
      nfiles: 2
    - path: preprocess_reviews.py
      md5: f6d38c329571279b99496f1cc58f0389
      size: 1428
    outs:
    - path: data/reviews
      md5: e0866fe512426dbf79e2bd5ee359096b.dir
      size: 158450968
      nfiles: 1
  success_metrics:
    cmd: python create_success_metrics.py data/products data/reviews
    deps:
    - path: create_success_metrics.py
      md5: 28f38d8686da74dbb295639997e7b26e
      size: 1539
    - path: data/products
      md5: 1b578030d5f2be4ff6ce39a5676d88f5.dir
      size: 876608673
      nfiles: 1
    - path: data/reviews
      md5: e0866fe512426dbf79e2bd5ee359096b.dir
      size: 158450968
      nfiles: 1
    params:
      params.yaml:
        success_metrics.cutoff: 2
    outs:
    - path: data/metrics
      md5: 1914681ee5f4661bf767999e031e4453.dir
      size: 877417162
      nfiles: 1
  supervised_model:
    cmd: python model_supervised.py data/metrics
    deps:
    - path: data/metrics
      md5: 1914681ee5f4661bf767999e031e4453.dir
      size: 877417162
      nfiles: 1
    - path: model_supervised.py
      md5: fdc277fd1e0af829b81f45004794fbb5
      size: 9989
    params:
      params.yaml:
        supervised_model.gscv: true
        supervised_model.model_type: GradientBoostingClassifier
        supervised_model.n_jobs: -1
        supervised_model.oversample: false
        supervised_model.param_dict:
          learning_rate:
          - 0.01
          - 0.05
          - 0.08
          subsample:
          - 0.1
          - 0.5
          - 1
          n_estimators:
          - 500
          - 1000
          - 1500
          max_depth:
          - 4
          - 8
          - 12
        supervised_model.params:
          random_state: 42
          C: 100
          gamma: 1
          kernel: rbf
        supervised_model.return_train_score: false
        supervised_model.scale: true
        supervised_model.split: 0.8
    outs:
    - path: model/product_success/
<<<<<<< HEAD
      md5: 219eab0cec22130548d6152c44e98366.dir
      size: 13427994
=======
      md5: dd42f890501fc514acbdc435b13a686f.dir
      size: 36733334
>>>>>>> 34ba46674db804fe31743dc25c448d0eed10a9d0
      nfiles: 7
  evaluate_supervised:
    cmd: python evaluate_supervised.py prdct_supervised_report.json
    deps:
    - path: evaluate_supervised.py
      md5: 6d0970926d9bc0977e2096dee37fdb93
      size: 6924
    - path: model/product_success/
<<<<<<< HEAD
      md5: 219eab0cec22130548d6152c44e98366.dir
      size: 13427994
      nfiles: 7
    outs:
    - path: prdct_supervised_report.json
      md5: 04ca125e82b10571429507ffb46a64a2
      size: 3316
=======
      md5: dd42f890501fc514acbdc435b13a686f.dir
      size: 36733334
      nfiles: 7
    outs:
    - path: prdct_supervised_report.json
      md5: 8503b049f54bb4bd9d4b564eeec1318b
      size: 3228
>>>>>>> 34ba46674db804fe31743dc25c448d0eed10a9d0
  prepare_fake_labeled_model:
    cmd: python load_prepare_fake_labeled_data.py
    deps:
    - path: data/fake/labeled_data/amazon_reviews_labeled.txt
      md5: ec3f2c1ef9598b56c38fbc00c0ac90de
      size: 8404357
    - path: load_prepare_fake_labeled_data.py
      md5: 27bf5d2e1665a1c3ae06a55f960c3d2d
      size: 1759
    outs:
    - path: data/fake/training/labeled_processed.pkl
      md5: a47919a26eae77a09ac3a3f27afdb403
      size: 70775394
  fd_supervised_model:
    cmd: python fake_detection_model.py data/fake/training/
    deps:
    - path: data/fake/training/
      md5: 466b9e866bd31e9406c7890d34ea576a.dir
      size: 70775394
      nfiles: 1
    - path: fake_detection_model.py
      md5: bef48a2eb7acad7fd329e8fb5b985468
      size: 10140
    outs:
    - path: model/fake/
      md5: f8ff40bcbae1ca9ccca01efabdd913b3.dir
      size: 13359192
      nfiles: 10
  fd_evaluate_supervised:
    cmd: python fd_evaluate_supervised.py fd_supervised_report.json
    deps:
    - path: fd_evaluate_supervised.py
      md5: 7693a8a803c32a7b3345cd6cb3f15934
      size: 6800
    - path: model/fake/
      md5: 05f85999fb5fb7c31ae406f074f61a82.dir
      size: 13384632
      nfiles: 10
    outs:
    - path: fd_supervised_report.json
      md5: f9cc1426170787e617cb6b475a712b2c
      size: 3298
  predicting_fake_reviews:
    cmd: python fd_test_model.py
    deps:
    - path: data/prepared/
      md5: 7870636af441f6a2358ac2b71ac57a47.dir
      size: 834301147
      nfiles: 2
    - path: fd_test_model.py
      md5: 8c00c71620291366c4d1eac05caaf502
      size: 5536
    - path: model/fake
      md5: f8ff40bcbae1ca9ccca01efabdd913b3.dir
      size: 13359192
      nfiles: 10
    outs:
    - path: data/fake/fake_free_data/
      md5: e7486572dfbc3ba159d8beb327abca95.dir
      size: 7866162988
      nfiles: 2
